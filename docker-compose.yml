version: '2'
services:
    solr:
        image: solr:5.5.3-alpine
        environment:
        - SOLR_HOME=/home/mysolrhome
        ports:
        - 8983:8983
        volumes:
        - ./solr-config:/home/mysolrhome
        - ./solr-config/data:/home/mysolrhome/mapping/data
        command: ["solr", "-f"]
    neo4j:
        image: neo4j:3.1.1
        environment:
        - NEO4J_HEAP_MEMORY=10g # configure the heap memory
        - NEO4J_dbms_memory_heap_maxSize=8g
        - NEO4J_AUTH=neo4j/dba
        cap_add:
         - SYS_RESOURCE
        ports:
        - 7474:7474
        - 7687:7687
        volumes:
          - ./neo4jimport:/var/lib/neo4j/import
          - ./neo4jdata:/var/lib/neo4j/data
#    oxo:
#        image: oxo:latest
#        depends_on:
#          - neo4j
#          - solr
#        links:
#          - neo4j
#          - solr
#        environment:
#          - spring.datasource.url=jdbc:hsqldb:file:/home/hsqldb
#          - oxo.neo.driver=org.neo4j.ogm.drivers.http.driver.HttpDriver
#          - oxo.neo.uri=http://neo4j:dba@neo4j:7474
#          - spring.data.solr.host=http://solr:8983/solr
#        command:
#            - java
#            - -Xmx6g
#            - -jar
#            - /home/oxo.war
#        ports:
#        - 8080:8080